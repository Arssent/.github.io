<!DOCTYPE html>

<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script> 

<script src="https://unpkg.com/aframe-extras.ocean@%5E3.5.x/dist/aframe-extras.ocean.min.js"></script>
<body style='margin : 0px; overflow: hidden;'>



<script>

var doo;
var Doo=0;
	
	
	AFRAME.registerComponent('markerhandler', {
    init: function() {
	    var doo=0;
	    
	    var dep = document.querySelector('#depressia');
        const animatedMarker = document.querySelector("#animated-marker");
        animatedMarker.addEventListener('click', function(ev){
var Go = setInterval(function() {  
	//alert('go');
var ocean = document.querySelector("#ocean");
var depress = document.querySelector('#depressia'); 
var Vector =depress.getAttribute('vector');
  var depressPos=depress.getAttribute('position');
  var depressPosY=depressPos.y;
var Opacity =ocean.getAttribute('material').opacity;
  if(Vector==1){
   var depressPosY=depressPosY+0.1;
	 // console.log(depressPosY);
   Opacity-=0.1;
}else{
var depressPosY=depressPosY-0.1;
Opacity+=0.1;
}
   if(depressPosY>-0.6){
   depress.setAttribute('position', {x: -1.3, y: depressPosY, z: 0});
}
  if(depressPosY>1){	
   depress.outerHTML='<a-entity id="depressia" geometry="primitive: sphere" material="color: yellow; shader: flat" position="-1.3 '+depressPosY+' 0" light="type: point; intensity: 5"></a-entity>';
}
if(Opacity<1.5){
 ocean.setAttribute('material', 'opacity', Opacity);
}
}, 600);
		dep.setAttribute('vector', 0);//doo=0;Go(doo);//Upp();
            if (animatedMarker.object3D.visible == true && ev.detail.cursorEl) { 
            }
        });
	    animatedMarker.addEventListener('mousedown', function(ev){ dep.setAttribute('vector', 1); //doo=1; Go(doo);  //Downn();
  
            if (animatedMarker.object3D.visible == true && ev.detail.cursorEl) { 
		    
            }
        });
}});
//Downn();
</script>
	<a-scene embedded arjs='sourceType: webcam;'>
   <a-assets>
<a-asset-item id="optimerBoldFont" src="https://raw.githubusercontent.com/Arssent/arssent.github.io/master/Arial%20Black_Regular.json"></a-asset-item>    
  <img id="groundTexture" crossorigin="anonymous" src="http://test1.ru/ardemo/floor.jpg">
    </a-assets>
    
    
   <a-entity id="depressia" vector="0" text-geometry="value: O; size:2" light="type: point; color:white; intensity: 100; distance: 50; decay: 2;"  material="color:white;" rotation="-90 0 0" position="-1.3 0.5 0" ></a-entity>
    
	<a-entity id="light" light="type: ambient; color: #888"></a-entity>
    
  
    
          <a-entity id="ocean" ocean="density:10; width: 5; height: 2; depth: 5; speed: 1" material="color: black; opacity: 0.99; metalness: 0; roughness: 1" rotation="-90 0 0"></a-entity>
    
    <!--<a-cylinder id="ground"  position="0 -0.5 0" radius="2" height="0.1" material="opacity:1; color:black;" ></a-cylinder>-->
		<a-marker-camera markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" preset='hiro'></a-marker-camera>
	</a-scene>
	
</body>
</html>


 
